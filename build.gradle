defaultTasks 'clean', 'snapshotNjgrSharedLibrary', 'snapshotTestExecutable'

// Apply plugins
apply plugin: 'c'

// Basic project information
group = 'LinkedNeurons'
archivesBaseName = 'njgr'
version = '1.0.0-SNAPSHOT'

// Extended project information
ext.projectName = 'NeuronsJustGotReal'
ext.inceptionYear = '2014'
ext.packaging = 'tar'
ext.url = ''
ext.description = 'A C library for neural networks.'
ext.organization = 'LinkedNeurons'

libraries {
    njgr {}
}

executables {
    test {
        binaries.all {
            cCompiler.args '-I', "/usr/local/include"
        }
    }
}

sources {
    test {
        c {
            lib libraries.njgr
        }
    }
}

buildTypes {
    debug {}
    snapshot {}
    release {}
}

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {}
}

binaries.all {
    cCompiler.args "-Wall"

    if (toolChain in Gcc || toolChain in Clang) {
        cCompiler.args "-Wextra"
        cCompiler.args "--std=c99"
        if (buildType == buildTypes.debug) {
            cCompiler.args "-g"
        } else {
            cCompiler.args "-O3"
        }
    }
}
